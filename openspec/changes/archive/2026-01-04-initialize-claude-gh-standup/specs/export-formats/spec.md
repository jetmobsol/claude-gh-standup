# Capability: Export Formats

## ADDED Requirements

### Requirement: Markdown Export
The system SHALL export standup reports in Markdown format with headers and metadata.

#### Scenario: Export as Markdown
- **WHEN** user specifies `--format markdown` or uses default
- **THEN** generates output with structure:
```markdown
# Standup Report
**Generated**: 2026-01-02 10:30:00
**User**: octocat
**Period**: 3 days

[AI-generated report content]

---
*Generated by claude-gh-standup*
```

#### Scenario: Markdown to stdout
- **WHEN** no `--output` flag specified
- **THEN** prints Markdown report to stdout
- **AND** user can pipe to file or view directly

#### Scenario: Markdown to file
- **WHEN** user specifies `--output standup.md`
- **THEN** writes Markdown content to file
- **AND** prints confirmation message with file path

### Requirement: JSON Export
The system SHALL export standup reports as structured JSON with metadata.

#### Scenario: Export as JSON
- **WHEN** user specifies `--format json`
- **THEN** generates JSON with structure:
```json
{
  "metadata": {
    "generated_at": "2026-01-02T10:30:00Z",
    "user": "octocat",
    "days": 3,
    "activity_count": 15
  },
  "report": "AI-generated report text",
  "activities": {
    "commits": [...],
    "pull_requests": [...],
    "issues": [...],
    "reviews": [...]
  }
}
```

#### Scenario: JSON pretty printing
- **WHEN** JSON is generated
- **THEN** uses Gson with `setPrettyPrinting()`
- **AND** produces indented, readable JSON

#### Scenario: JSON with raw activity data
- **WHEN** JSON export includes activities
- **THEN** preserves original activity objects from GitHub API
- **AND** allows downstream processing or analysis

### Requirement: HTML Export
The system SHALL export standup reports as styled HTML documents.

#### Scenario: Export as HTML
- **WHEN** user specifies `--format html`
- **THEN** generates HTML with:
  - DOCTYPE and proper structure
  - Embedded CSS for styling
  - Metadata section
  - Report content with line breaks
  - Professional appearance

#### Scenario: HTML styling
- **WHEN** HTML is generated
- **THEN** includes CSS with:
  - Max-width container (800px)
  - Readable font (Arial, sans-serif)
  - Line height for readability (1.6)
  - Styled metadata section
  - Responsive design

#### Scenario: HTML content formatting
- **WHEN** report text contains newlines
- **THEN** converts `\n` to `<br>` tags
- **AND** preserves paragraph structure

### Requirement: Format Selection
The system SHALL validate and select export format based on `--format` flag.

#### Scenario: Valid format specified
- **WHEN** user provides `--format markdown|json|html`
- **THEN** system uses corresponding exporter
- **AND** generates output in that format

#### Scenario: Invalid format specified
- **WHEN** user provides invalid format (e.g., `--format pdf`)
- **THEN** prints error message listing valid formats
- **AND** exits with code 1

#### Scenario: Default format
- **WHEN** no `--format` flag provided
- **THEN** defaults to Markdown format
- **AND** proceeds with Markdown export

### Requirement: Output Destination
The system SHALL write formatted reports to stdout or file based on `--output` flag.

#### Scenario: Output to stdout
- **WHEN** no `--output` flag specified
- **THEN** prints formatted report to stdout
- **AND** user can redirect with shell operators

#### Scenario: Output to file
- **WHEN** user specifies `--output path/to/file.md`
- **THEN** writes content to specified file
- **AND** creates parent directories if needed
- **AND** prints confirmation: "Report saved to {path}"

#### Scenario: File write failure
- **WHEN** file path is invalid or permission denied
- **THEN** prints error message with details
- **AND** exits with code 1
