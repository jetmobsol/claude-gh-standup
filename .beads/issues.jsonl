{"id":"claude-gh-standup-1kl","title":"Phase 5: Service Layer","description":"## Spec Reference\nopenspec/changes/refactor-ddd-architecture/specs/ports-adapters/spec.md\n\n## Requirements\n1. Create ActivityService.java - orchestrates activity collection via ports\n2. Create DiffService.java - orchestrates diff analysis via ports\n3. Create ReportService.java - orchestrates report generation via ports\n4. Create TeamService.java - orchestrates team aggregation\n\n## Acceptance Criteria\n- Services accept ports via constructor (dependency injection)\n- Services contain business logic, not CLI calls\n- All services pass their corresponding tests from Phase 3.2\n\n## Files to Create\n- scripts/services/ActivityService.java\n- scripts/services/DiffService.java\n- scripts/services/ReportService.java\n- scripts/services/TeamService.java\n\n## Dependencies\nDepends on Phase 3.2 (Service tests written first - TDD)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T22:16:31.026763+02:00","created_by":"garden","updated_at":"2026-01-06T22:16:31.026763+02:00","labels":["openspec:refactor-ddd-architecture"],"dependencies":[{"issue_id":"claude-gh-standup-1kl","depends_on_id":"claude-gh-standup-686","type":"blocks","created_at":"2026-01-06T22:17:10.013409+02:00","created_by":"garden"}]}
{"id":"claude-gh-standup-2jv","title":"Phase 3.1: Mock Port Implementations","description":"## Spec Reference\nopenspec/changes/refactor-ddd-architecture/specs/testing-architecture/spec.md\n\n## Requirements\n1. Create MockActivityPort.java - stubCommits, stubPullRequests, stubIssues, stubReviews\n2. Create MockDiffPort.java - stubDiffSummary\n3. Create MockGitPort.java - stub methods for branch, files, repository\n4. Create MockReportGeneratorPort.java - captures prompt for verification\n5. Create MockExportPort.java - returns stubbed export string\n\n## Acceptance Criteria\n- Each mock implements corresponding port interface\n- Mocks provide stub methods for test setup\n- Mocks can verify method calls in tests\n\n## Files to Create\n- test/mocks/MockActivityPort.java\n- test/mocks/MockDiffPort.java\n- test/mocks/MockGitPort.java\n- test/mocks/MockReportGeneratorPort.java\n- test/mocks/MockExportPort.java\n\n## Dependencies\nDepends on Phase 2 (Port interfaces)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T22:16:09.35657+02:00","created_by":"garden","updated_at":"2026-01-06T22:16:09.35657+02:00","labels":["openspec:refactor-ddd-architecture"],"dependencies":[{"issue_id":"claude-gh-standup-2jv","depends_on_id":"claude-gh-standup-iaa","type":"blocks","created_at":"2026-01-06T22:17:09.892826+02:00","created_by":"garden"}]}
{"id":"claude-gh-standup-41c","title":"Phase 1.4: Team Bounded Context Entities","description":"## Spec Reference\nopenspec/changes/refactor-ddd-architecture/specs/domain-model/spec.md\n\n## Requirements\n1. Create TeamMember.java entity (username, Activity)\n2. Write TeamReportTest.java\n3. Create TeamReport.java aggregate (list of TeamMember, team stats)\n\n## Acceptance Criteria\n- TeamMember links username to their Activity\n- TeamReport aggregates multiple TeamMembers\n- Team-level statistics available\n\n## Files to Create\n- scripts/domain/team/TeamMember.java\n- scripts/domain/team/TeamReport.java\n- test/domain/team/TeamReportTest.java\n\n## Dependencies\nDepends on Phase 1.1 (Activity entities)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T22:15:53.088487+02:00","created_by":"garden","updated_at":"2026-01-06T22:15:53.088487+02:00","labels":["openspec:refactor-ddd-architecture"],"dependencies":[{"issue_id":"claude-gh-standup-41c","depends_on_id":"claude-gh-standup-nkm","type":"blocks","created_at":"2026-01-06T22:17:09.694439+02:00","created_by":"garden"}]}
{"id":"claude-gh-standup-5m4","title":"DDD Refactoring - Ports \u0026 Adapters Architecture","description":"## OpenSpec Change\nImplements openspec/changes/refactor-ddd-architecture/\n\n## Scope\nRefactor JBang scripts to Domain Driven Design with Ports \u0026 Adapters pattern:\n- Extract domain entities into bounded contexts (Activity, Report, Team)\n- Create port interfaces for external dependencies (GitHub, Git, Claude CLIs)\n- Implement infrastructure adapters via ProcessBuilder\n- Add service layer with dependency injection\n- Enable unit testing with JUnit 5 + mock ports\n\n## Spec Files\n- openspec/changes/refactor-ddd-architecture/proposal.md\n- openspec/changes/refactor-ddd-architecture/design.md\n- openspec/changes/refactor-ddd-architecture/tasks.md\n\n## Success Criteria\n- All domain entities have unit tests\n- Services tested with mocked ports\n- CLI args unchanged (backward compatible)\n- No ProcessBuilder calls in domain/services layer\n\n## GitHub Issue\nCloses #38","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-06T22:15:28.605792+02:00","created_by":"garden","updated_at":"2026-01-06T22:15:28.605792+02:00","labels":["openspec:refactor-ddd-architecture"]}
{"id":"claude-gh-standup-686","title":"Phase 3.2: Service Tests (TDD)","description":"## Spec Reference\nopenspec/changes/refactor-ddd-architecture/specs/testing-architecture/spec.md\n\n## Requirements (Write tests BEFORE services)\n1. Write ActivityServiceTest.java - test activity collection with mocks\n2. Write DiffServiceTest.java - test diff analysis with mocks\n3. Write ReportServiceTest.java - test report generation with mocks\n4. Write TeamServiceTest.java - test team aggregation with mocks\n\n## Acceptance Criteria\n- Tests use mock ports (no real CLI calls)\n- Tests verify correct orchestration logic\n- Tests run without gh/git/claude installed\n\n## Files to Create\n- test/services/ActivityServiceTest.java\n- test/services/DiffServiceTest.java\n- test/services/ReportServiceTest.java\n- test/services/TeamServiceTest.java\n\n## Dependencies\nDepends on Phase 3.1 (Mock implementations)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T22:16:09.507712+02:00","created_by":"garden","updated_at":"2026-01-06T22:16:09.507712+02:00","labels":["openspec:refactor-ddd-architecture"],"dependencies":[{"issue_id":"claude-gh-standup-686","depends_on_id":"claude-gh-standup-2jv","type":"blocks","created_at":"2026-01-06T22:17:09.934057+02:00","created_by":"garden"}]}
{"id":"claude-gh-standup-9qk","title":"Phase 6: Integration \u0026 Main.java Refactoring","description":"## Spec Reference\nopenspec/changes/refactor-ddd-architecture/design.md\n\n## Requirements\n### 6.1 Main.java Refactoring\n1. Update JBang //SOURCES directives for new structure\n2. Add dependency wiring in main() - create adapters, inject into services\n3. Replace inline code with service calls\n4. Remove old monolithic methods\n\n### 6.2 Test Runner\n1. Create RunAllTests.java with JUnit Platform Launcher\n2. Verify all tests pass\n\n### 6.3 Backward Compatibility Testing\n1. Test: jbang scripts/Main.java --days 1 --no-claude\n2. Test: jbang scripts/Main.java --days 3 --user octocat --repo cli/cli\n3. Test: jbang scripts/Main.java --team user1 user2 --days 7\n4. Test: All export formats (markdown, json, html)\n\n## Acceptance Criteria\n- Main.java is thin orchestrator (~100 lines of wiring)\n- All CLI flags work exactly as before\n- jbang test/RunAllTests.java passes\n- No regression in functionality\n\n## Files to Modify\n- scripts/Main.java (major refactor)\n\n## Files to Create\n- test/RunAllTests.java\n\n## Dependencies\nDepends on ALL previous phases (4, 5)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T22:16:31.193801+02:00","created_by":"garden","updated_at":"2026-01-06T22:16:31.193801+02:00","labels":["openspec:refactor-ddd-architecture"],"dependencies":[{"issue_id":"claude-gh-standup-9qk","depends_on_id":"claude-gh-standup-che","type":"blocks","created_at":"2026-01-06T22:17:10.052361+02:00","created_by":"garden"},{"issue_id":"claude-gh-standup-9qk","depends_on_id":"claude-gh-standup-1kl","type":"blocks","created_at":"2026-01-06T22:17:10.09197+02:00","created_by":"garden"}]}
{"id":"claude-gh-standup-b6d","title":"Phase 1.2: Report Bounded Context Entities","description":"## Spec Reference\nopenspec/changes/refactor-ddd-architecture/specs/domain-model/spec.md\n\n## Requirements (TDD)\n1. Write DiffSummaryTest.java\n2. Create DiffSummary.java value object (files changed, additions, deletions)\n3. Create ReportSection.java value object (title, content)\n4. Write StandupReportTest.java\n5. Create StandupReport.java aggregate (list of sections, timestamp)\n\n## Acceptance Criteria\n- Value objects are immutable Java records\n- DiffSummary.fromDiff() parses raw diff text\n- No external dependencies in domain layer\n\n## Files to Create\n- scripts/domain/report/DiffSummary.java\n- scripts/domain/report/ReportSection.java\n- scripts/domain/report/StandupReport.java\n- test/domain/report/DiffSummaryTest.java\n- test/domain/report/StandupReportTest.java\n\n## Can Run In Parallel With\nPhase 1.1 (Activity), Phase 1.3 (Shared)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T22:15:52.784713+02:00","created_by":"garden","updated_at":"2026-01-06T22:15:52.784713+02:00","labels":["openspec:refactor-ddd-architecture"]}
{"id":"claude-gh-standup-b78","title":"aaa","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T16:00:18.26721+02:00","created_by":"garden","updated_at":"2026-01-06T16:00:18.26721+02:00"}
{"id":"claude-gh-standup-che","title":"Phase 4: Infrastructure Adapters","description":"## Spec Reference\nopenspec/changes/refactor-ddd-architecture/specs/ports-adapters/spec.md\n\n## Requirements\n1. Create GitHubCliAdapter.java - implements ActivityPort, DiffPort via `gh` CLI\n2. Create GitCliAdapter.java - implements GitPort via `git` CLI\n3. Create ClaudeCliAdapter.java - implements ReportGeneratorPort via `claude` CLI\n4. Create MarkdownExporter.java - implements ExportPort\n5. Create JsonExporter.java - implements ExportPort\n6. Create HtmlExporter.java - implements ExportPort\n\n## Acceptance Criteria\n- Adapters use ProcessBuilder for CLI execution\n- JSON parsing uses Gson (only in adapters, not domain)\n- Error handling with graceful degradation\n- ClaudeCliAdapter uses inheritIO() for streaming\n\n## Files to Create\n- scripts/infrastructure/github/GitHubCliAdapter.java\n- scripts/infrastructure/git/GitCliAdapter.java\n- scripts/infrastructure/ai/ClaudeCliAdapter.java\n- scripts/infrastructure/export/MarkdownExporter.java\n- scripts/infrastructure/export/JsonExporter.java\n- scripts/infrastructure/export/HtmlExporter.java\n\n## Dependencies\nDepends on Phase 2 (Port interfaces)\nCan run in parallel with Phase 3 (Mocks/Tests)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T22:16:30.877995+02:00","created_by":"garden","updated_at":"2026-01-06T22:16:30.877995+02:00","labels":["openspec:refactor-ddd-architecture"],"dependencies":[{"issue_id":"claude-gh-standup-che","depends_on_id":"claude-gh-standup-iaa","type":"blocks","created_at":"2026-01-06T22:17:09.974188+02:00","created_by":"garden"}]}
{"id":"claude-gh-standup-clq","title":"Phase 7: Cleanup \u0026 Documentation","description":"## Spec Reference\nopenspec/changes/refactor-ddd-architecture/tasks.md\n\n## Requirements\n1. Remove deprecated code from old scripts (CollectActivity.java, etc. if replaced)\n2. Update CLAUDE.md with new architecture patterns\n3. Update openspec/project.md with new conventions\n\n## Acceptance Criteria\n- No dead code remaining\n- CLAUDE.md documents DDD structure and patterns\n- project.md reflects new architecture conventions\n\n## Files to Modify\n- CLAUDE.md\n- openspec/project.md\n- Potentially remove old scripts if fully replaced\n\n## Dependencies\nDepends on Phase 6 (Integration complete)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T22:16:31.363465+02:00","created_by":"garden","updated_at":"2026-01-06T22:16:31.363465+02:00","labels":["openspec:refactor-ddd-architecture"],"dependencies":[{"issue_id":"claude-gh-standup-clq","depends_on_id":"claude-gh-standup-9qk","type":"blocks","created_at":"2026-01-06T22:17:10.131588+02:00","created_by":"garden"}]}
{"id":"claude-gh-standup-e4l","title":"aaa","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T16:28:53.091831+02:00","created_by":"garden","updated_at":"2026-01-06T16:28:53.091831+02:00"}
{"id":"claude-gh-standup-e5g","title":"Phase 1.3: Shared Value Objects","description":"## Spec Reference\nopenspec/changes/refactor-ddd-architecture/specs/domain-model/spec.md\n\n## Requirements (TDD)\n1. Write DateRangeTest.java\n2. Create DateRange.java (start/end dates, lastDays() factory)\n3. Write RepositoryTest.java\n4. Create Repository.java (owner/repo pair, parse() factory)\n\n## Acceptance Criteria\n- DateRange.lastDays(int) creates range from N days ago to now\n- DateRange provides date formatting for GitHub API queries\n- Repository.parse(\"owner/repo\") parses string format\n- Repository.toString() returns \"owner/repo\"\n\n## Files to Create\n- scripts/domain/shared/DateRange.java\n- scripts/domain/shared/Repository.java\n- test/domain/shared/DateRangeTest.java\n- test/domain/shared/RepositoryTest.java\n\n## Can Run In Parallel With\nPhase 1.1 (Activity), Phase 1.2 (Report)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T22:15:52.93779+02:00","created_by":"garden","updated_at":"2026-01-06T22:15:52.93779+02:00","labels":["openspec:refactor-ddd-architecture"]}
{"id":"claude-gh-standup-iaa","title":"Phase 2: Port Interfaces","description":"## Spec Reference\nopenspec/changes/refactor-ddd-architecture/specs/ports-adapters/spec.md\n\n## Requirements\n1. Create ActivityPort.java - fetchCommits, fetchPullRequests, fetchIssues, fetchReviews\n2. Create DiffPort.java - fetchPRDiff\n3. Create GitPort.java - getCurrentBranch, getStagedFiles, getUnstagedFiles, getUnpushedCommits, detectRepository\n4. Create ReportGeneratorPort.java - generate(prompt)\n5. Create ExportPort.java - export(StandupReport)\n\n## Acceptance Criteria\n- All ports are interfaces (no implementation)\n- Methods use domain entities as parameters/return types\n- No external dependencies in port definitions\n\n## Files to Create\n- scripts/ports/ActivityPort.java\n- scripts/ports/DiffPort.java\n- scripts/ports/GitPort.java\n- scripts/ports/ReportGeneratorPort.java\n- scripts/ports/ExportPort.java\n\n## Dependencies\nDepends on Phase 1 (all domain entities)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T22:16:09.206791+02:00","created_by":"garden","updated_at":"2026-01-06T22:16:09.206791+02:00","labels":["openspec:refactor-ddd-architecture"],"dependencies":[{"issue_id":"claude-gh-standup-iaa","depends_on_id":"claude-gh-standup-nkm","type":"blocks","created_at":"2026-01-06T22:17:09.733141+02:00","created_by":"garden"},{"issue_id":"claude-gh-standup-iaa","depends_on_id":"claude-gh-standup-b6d","type":"blocks","created_at":"2026-01-06T22:17:09.772118+02:00","created_by":"garden"},{"issue_id":"claude-gh-standup-iaa","depends_on_id":"claude-gh-standup-e5g","type":"blocks","created_at":"2026-01-06T22:17:09.812339+02:00","created_by":"garden"},{"issue_id":"claude-gh-standup-iaa","depends_on_id":"claude-gh-standup-41c","type":"blocks","created_at":"2026-01-06T22:17:09.852858+02:00","created_by":"garden"}]}
{"id":"claude-gh-standup-nkm","title":"Phase 1.1: Activity Bounded Context Entities","description":"## Spec Reference\nopenspec/changes/refactor-ddd-architecture/specs/domain-model/spec.md\n\n## Requirements (TDD - write tests first)\n1. Write CommitTest.java - JSON parsing, equality tests\n2. Create Commit.java record (SHA, message, author, date, URL)\n3. Write PullRequestTest.java\n4. Create PullRequest.java record (number, title, state, URL, additions, deletions)\n5. Write IssueTest.java\n6. Create Issue.java record (number, title, state, URL, labels)\n7. Write ReviewTest.java\n8. Create Review.java record (PR number, state, body, URL)\n9. Write ActivityTest.java (aggregate tests)\n10. Create Activity.java aggregate (contains lists of above entities)\n\n## Acceptance Criteria\n- All entities are Java records (immutable)\n- Each entity has fromJson() static factory method\n- Domain layer has NO Gson annotations (parsing in adapters)\n- All tests pass with `jbang test/domain/activity/*Test.java`\n\n## Files to Create\n- scripts/domain/activity/Commit.java\n- scripts/domain/activity/PullRequest.java\n- scripts/domain/activity/Issue.java\n- scripts/domain/activity/Review.java\n- scripts/domain/activity/Activity.java\n- test/domain/activity/CommitTest.java\n- test/domain/activity/PullRequestTest.java\n- test/domain/activity/IssueTest.java\n- test/domain/activity/ReviewTest.java\n- test/domain/activity/ActivityTest.java","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T22:15:38.925512+02:00","created_by":"garden","updated_at":"2026-01-06T22:15:38.925512+02:00","labels":["openspec:refactor-ddd-architecture"]}
